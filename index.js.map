{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nimport axios from 'axios';\n\n\nasync function getImagesByQuery(query, Page){\n\n            const getHttp = axios({\n                method:'get',\n                url: 'https://pixabay.com/api/',\n                params:{\n                    key: '50347067-e28b29b4ef237673f62dbb07b',\n                    q: query,\n                    image_type: 'photo',\n                    orientation: 'horizontal',\n                    safesearch: true,\n                    per_page: 15,\n                    page: Page,\n                    } \n\n            })\n\n            const value = await getHttp;\n                const images = value.data.hits;\n                \n                \n                \n                const totalhits = value.data.totalHits;\n                \n                \n                // if(images.length === 0){\n                //     iziToast.show({\n                \n                //         message: 'Sorry, there are no images matching your search query. Please try again!',\n                //         color: 'red',\n                //         messageColor: 'white',\n                //         position: 'topRight'\n        \n                //     });\n                    \n\n                // }\n\n                return {Images: images, TotalHits: totalhits}; \n        }\n\nexport default getImagesByQuery;\n\n\n\n","import SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst ul = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadButton = document.querySelector('.load-button');\n\n\n\n\n\n\nconst lightBox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    captionPosition: 'bottom',\n});\n\n\n\nfunction createGallery(images){\n    \n    let markUp = '';\n    for(let i = 0; i < images.length; i++){\n        markUp += `\n            <li>\n                <div class=\"photo\">\n                    <a href=\"${images[i].largeImageURL}\">\n                        <img\n                        src=\"${images[i].webformatURL}\"\n                        alt=\"${images[i].tags}\"\n                        \n                        >\n                    </a>\n                    \n                </div>\n                <div class=\"info\">\n                    <p class=\"text\">Likes <span class=\"info-span\">${images[i].likes}</span></p>\n                    <p class=\"text\">Views <span class=\"info-span\">${images[i].views}</span></p>\n                    <p class=\"text\">Comments <span class=\"info-span\">${images[i].comments}</span></p>\n                    <p class=\"text\">Downloads <span class=\"info-span\">${images[i].downloads}</span></p> \n                \n                \n                \n                </div>\n                    \n                \n                \n                    \n                    \n            \n            \n            </li>\n            \n        \n        `;\n\n    }\n    ul.insertAdjacentHTML('beforeend', markUp);\n    \n    lightBox.refresh();\n}\n\n\n\nexport function clearGallery(){\n    ul.innerHTML = '';\n}\nexport function showLoader(){\n    loader.classList.add('show');\n}\n\nexport function hideLoader(){\n    loader.classList.remove('show');\n}\n\nexport function showLoadMoreButton(){\n    \n    loadButton.classList.add('show');\n}\nexport function hideLoadMoreButton(){\n    \n    loadButton.classList.remove('show');\n}\n\n\n\nexport default createGallery;\n","import getImagesByQuery from \"./js/pixabay-api\";\nimport createGallery from \"./js/render-functions\";\nimport { clearGallery, showLoader, hideLoader , showLoadMoreButton, hideLoadMoreButton} from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst inputForm = document.querySelector('input');\nconst formDoc = document.querySelector('form');\nconst loadButton = document.querySelector('.load-button');\n\n\n\nlet page = 1;\nlet UserPrompt = '';\n\n\n async function formHandler(event){\n    \n    event.preventDefault();\n    \n    page = 1;\n    \n    \n    \n\n    const form = event.currentTarget;\n\n\n    if(inputForm.value.trim() === ''){\n        iziToast.show({\n            \n            message: 'Please fill all fields',\n            color: 'red',\n            messageColor: 'white',\n            position: 'topRight'\n\n        });\n        \n\n    }else{\n        \n        hideLoadMoreButton();\n        showLoader();\n        \n        try {\n            \n            \n            const value =  await getImagesByQuery(inputForm.value.trim(), page)\n            const totalPages = Math.ceil(value.TotalHits / 15);\n\n            if (value.TotalHits === 0){\n                throw new Error('Sorry, there are no images matching your search query. Please try again!');\n            }\n            \n            UserPrompt = inputForm.value;            \n    \n            clearGallery();\n            createGallery(value.Images);\n            const li = document.querySelectorAll('li');\n            \n            if(value.TotalHits > 0){\n                showLoadMoreButton();\n                \n\n            }\n            else{\n                hideLoadMoreButton()\n            }\n            if(page >= totalPages){\n                hideLoadMoreButton();\n            }\n            if( li.length < 15){\n                hideLoadMoreButton();\n\n            }\n            \n            \n\n            \n        } catch (error) {\n            clearGallery();\n            iziToast.show({\n                \n                        message: error.message,\n                        color: 'red',\n                        messageColor: 'white',\n                        position: 'topRight'\n        \n                    });\n            \n            \n                \n                \n\n            \n                    \n                    \n                \n        }\n        \n        \n        hideLoader();\n        \n    }\n    \n\n    form.reset();\n    \n}\n\n\n\nformDoc.addEventListener('submit', formHandler);\n\n\nloadButton.addEventListener('click', handleLoadButton);\n\n\nasync function handleLoadButton(event) {\n    page += 1;\n    \n    \n    const images = await getImagesByQuery(UserPrompt, page);\n    showLoader()\n    createGallery(images.Images);\n    \n    hideLoader();\n    \n    const TotalPages = Math.ceil(images.TotalHits / 15);\n    \n    if(page >= TotalPages){\n        iziToast.show({\n                        \n            message: \"We're sorry, but you've reached the end of search results.\",\n\n            color: 'red',\n            messageColor: 'white',\n            position: 'topRight'\n\n        });\n        \n        hideLoadMoreButton();\n\n    }\n    \n    const img = document.querySelector('li');\n    let rect = img.getBoundingClientRect();\n    window.scrollBy({\n        top: 2 * rect.height,\n        left: 0,\n        behavior: \"smooth\",\n      });\n      \n    console.log(2 * rect.height);\n    \n    \n    \n    \n}\n"],"names":["getImagesByQuery","query","Page","value","axios","images","totalhits","ul","loader","loadButton","lightBox","SimpleLightbox","createGallery","markUp","i","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","inputForm","formDoc","page","UserPrompt","formHandler","event","form","iziToast","totalPages","li","error","handleLoadButton","TotalPages","rect"],"mappings":"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"}