{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst ul = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadButton = document.querySelector('.load-button');\n\n\n\n\n\n\nconst lightBox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    captionPosition: 'bottom',\n});\n\n\n\nfunction createGallery(images){\n    \n    let markUp = '';\n    for(let i = 0; i < images.length; i++){\n        markUp += `\n            <li>\n                <div class=\"photo\">\n                    <a href=\"${images[i].largeImageURL}\">\n                        <img\n                        src=\"${images[i].webformatURL}\"\n                        alt=\"${images[i].tags}\"\n                        \n                        >\n                    </a>\n                    \n                </div>\n                <div class=\"info\">\n                    <p class=\"text\">Likes <span class=\"info-span\">${images[i].likes}</span></p>\n                    <p class=\"text\">Views <span class=\"info-span\">${images[i].views}</span></p>\n                    <p class=\"text\">Comments <span class=\"info-span\">${images[i].comments}</span></p>\n                    <p class=\"text\">Downloads <span class=\"info-span\">${images[i].downloads}</span></p> \n                \n                \n                \n                </div>\n                    \n                \n                \n                    \n                    \n            \n            \n            </li>\n            \n        \n        `;\n\n    }\n    ul.insertAdjacentHTML('beforeend', markUp);\n    \n    lightBox.refresh();\n}\n\n\n\nexport function clearGallery(){\n    ul.innerHTML = '';\n}\nexport function showLoader(){\n    loader.classList.add('show');\n}\n\nexport function hideLoader(){\n    loader.classList.remove('show');\n}\n\nexport function showLoadMoreButton(){\n    \n    loadButton.classList.add('show');\n}\nexport function hideLoadMoreButton(){\n    \n    loadButton.classList.remove('show');\n}\n\n\n\nexport default createGallery;\n","import iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nimport axios from 'axios';\nimport createGallery from \"./render-functions\";\nconst loadButton = document.querySelector('.load-button');\n\n\n\n\n\n\n\n\n\n\nlet userPrompt = '';\nlet Page = 1;\nasync function getImagesByQuery(query){\n\n    if(userPrompt !== query){\n        userPrompt = query;\n        Page = 1;\n    }\n    else{\n        Page += 1;\n    }\n\n \n    \n    \n            \n\n    \n            const getHttp = axios({\n                method:'get',\n                url: 'https://pixabay.com/api/',\n                params:{\n                    key: '50347067-e28b29b4ef237673f62dbb07b',\n                    q: query,\n                    image_type: 'photo',\n                    orientation: 'horizontal',\n                    safesearch: true,\n                    per_page: 15,\n                    page: Page,\n                    } \n\n            })\n            \n\n            \n                \n            \n            \n            const value = await getHttp;\n                const images = value.data.hits;\n                \n                \n                \n                const totalhits = value.data.totalHits;\n                \n                \n                if(images.length === 0){\n                    iziToast.show({\n                \n                        message: 'Sorry, there are no images matching your search query. Please try again!',\n                        color: 'red',\n                        messageColor: 'white',\n                        position: 'topRight'\n        \n                    });\n                    \n\n                }\n\n                \n                \n\n                \n                \n                \n                \n\n                \n                \n                \n                \n                return {Images: images, TotalHits: totalhits}; \n        }\n        \n\n        // loadButton.addEventListener('click',   async (event) =>{\n            \n        //     Page += 1;\n            \n        //     if(Page > totalPages){\n        //         iziToast.show({\n                \n        //             message: \"We're sorry, but you've reached the end of search results.\",\n\n        //             color: 'red',\n        //             messageColor: 'white',\n        //             position: 'topRight'\n    \n        //         });\n        //         hideLoadMoreButton();\n\n        //     }\n        //     else{\n        //         const images = await getImagesByQuery(userPrompt);\n                \n        //         showLoader()\n        //         createGallery(images);\n        //         hideLoader();\n\n        //     }\n\n            \n            \n            \n            \n            \n            \n                \n            \n        // })\n\n\n        \n\n        \n\n\n        \n\n\n        \n\n\n   \n\nexport default getImagesByQuery;\n\n\n\n","import getImagesByQuery from \"./js/pixabay-api\";\nimport createGallery from \"./js/render-functions\";\nimport { clearGallery, showLoader, hideLoader , showLoadMoreButton, hideLoadMoreButton} from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst inputForm = document.querySelector('input');\nconst formDoc = document.querySelector('form');\nconst loadButton = document.querySelector('.load-button');\n\n\n\nlet page = 1;\nlet UserPrompt = '';\n\n\n async function formHandler(event){\n    \n    event.preventDefault();\n    \n    \n\n    const form = event.currentTarget;\n\n\n    if(inputForm.value.trim() === ''){\n        iziToast.show({\n            \n            message: 'Please fill all fields',\n            color: 'red',\n            messageColor: 'white',\n            position: 'topRight'\n\n        });\n        \n\n    }else{\n        \n        hideLoadMoreButton();\n        showLoader();\n        showLoadMoreButton();\n        try {\n            \n            const value =  await getImagesByQuery(inputForm.value.trim())\n            const totalPages = Math.ceil(value.TotalHits / 15);\n            \n            UserPrompt = inputForm.value;            \n    \n            clearGallery();\n            createGallery(value.Images);\n            \n            \n                \n\n            \n            \n            \n            \n            \n        } catch (error) {\n            \n                    iziToast.show({\n                        \n                        message: 'Sorry, there are no images matching your search query. Please try again!',\n                        color: 'red',\n                        messageColor: 'white',\n                        position: 'topRight'\n            \n                    });\n                \n        }\n        \n        \n        hideLoader();\n        \n    }\n    \n\n    form.reset();\n    \n}\n\n\n\nformDoc.addEventListener('submit', formHandler);\n\n\nloadButton.addEventListener('click', handleLoadButton);\n\n\nasync function handleLoadButton(event) {\n    page += 1;\n    \n    \n    const images = await getImagesByQuery(UserPrompt);\n    const TotalPages = Math.ceil(images.TotalHits / 15);\n    if(page >= TotalPages){\n        iziToast.show({\n                        \n            message: \"We're sorry, but you've reached the end of search results.\",\n\n            color: 'red',\n            messageColor: 'white',\n            position: 'topRight'\n\n        });\n        page = 32;\n        hideLoadMoreButton();\n\n    }\n    showLoader()\n    createGallery(images.Images);\n    hideLoader();\n    \n    \n}\n"],"names":["ul","loader","loadButton","lightBox","SimpleLightbox","createGallery","images","markUp","i","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","userPrompt","Page","getImagesByQuery","query","value","axios","totalhits","iziToast","inputForm","formDoc","page","UserPrompt","formHandler","event","form","totalPages","handleLoadButton","TotalPages"],"mappings":"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"}